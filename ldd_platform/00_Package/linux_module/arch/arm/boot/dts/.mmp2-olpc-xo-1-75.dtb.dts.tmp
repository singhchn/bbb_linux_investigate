# 1 "arch/arm/boot/dts/mmp2-olpc-xo-1-75.dts"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "arch/arm/boot/dts/mmp2-olpc-xo-1-75.dts"







/dts-v1/;
# 1 "arch/arm/boot/dts/mmp2.dtsi" 1






# 1 "./scripts/dtc/include-prefixes/dt-bindings/clock/marvell,mmp2.h" 1
# 8 "arch/arm/boot/dts/mmp2.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/power/marvell,mmp2.h" 1
# 9 "arch/arm/boot/dts/mmp2.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/clock/marvell,mmp2-audio.h" 1
# 10 "arch/arm/boot/dts/mmp2.dtsi" 2

/ {
 #address-cells = <1>;
 #size-cells = <1>;

 aliases {
  serial0 = &uart1;
  serial1 = &uart2;
  serial2 = &uart3;
  serial3 = &uart4;
  i2c0 = &twsi1;
  i2c1 = &twsi2;
 };

 soc {
  #address-cells = <1>;
  #size-cells = <1>;
  compatible = "simple-bus";
  interrupt-parent = <&intc>;
  ranges;

  L2: l2-cache {
   compatible = "marvell,tauros2-cache";
   marvell,tauros2-cache-features = <0x3>;
  };

  axi@d4200000 {
   compatible = "mrvl,axi-bus", "simple-bus";
   #address-cells = <1>;
   #size-cells = <1>;
   reg = <0xd4200000 0x00200000>;
   ranges;

   gpu: gpu@d420d000 {
    compatible = "vivante,gc";
    reg = <0xd420d000 0x4000>;
    interrupts = <8>;
    status = "disabled";
    clocks = <&soc_clocks 124>,
      <&soc_clocks 123>;
    clock-names = "core", "bus";
    power-domains = <&soc_clocks 0>;
   };

   intc: interrupt-controller@d4282000 {
    compatible = "mrvl,mmp2-intc";
    interrupt-controller;
    #interrupt-cells = <1>;
    reg = <0xd4282000 0x1000>;
    mrvl,intc-nr-irqs = <64>;
   };

   intcmux4: interrupt-controller@d4282150 {
    compatible = "mrvl,mmp2-mux-intc";
    interrupts = <4>;
    interrupt-controller;
    #interrupt-cells = <1>;
    reg = <0x150 0x4>, <0x168 0x4>;
    reg-names = "mux status", "mux mask";
    mrvl,intc-nr-irqs = <2>;
   };

   intcmux5: interrupt-controller@d4282154 {
    compatible = "mrvl,mmp2-mux-intc";
    interrupts = <5>;
    interrupt-controller;
    #interrupt-cells = <1>;
    reg = <0x154 0x4>, <0x16c 0x4>;
    reg-names = "mux status", "mux mask";
    mrvl,intc-nr-irqs = <2>;
    mrvl,clr-mfp-irq = <1>;
   };

   intcmux9: interrupt-controller@d4282180 {
    compatible = "mrvl,mmp2-mux-intc";
    interrupts = <9>;
    interrupt-controller;
    #interrupt-cells = <1>;
    reg = <0x180 0x4>, <0x17c 0x4>;
    reg-names = "mux status", "mux mask";
    mrvl,intc-nr-irqs = <3>;
   };

   intcmux17: interrupt-controller@d4282158 {
    compatible = "mrvl,mmp2-mux-intc";
    interrupts = <17>;
    interrupt-controller;
    #interrupt-cells = <1>;
    reg = <0x158 0x4>, <0x170 0x4>;
    reg-names = "mux status", "mux mask";
    mrvl,intc-nr-irqs = <5>;
   };

   intcmux35: interrupt-controller@d428215c {
    compatible = "mrvl,mmp2-mux-intc";
    interrupts = <35>;
    interrupt-controller;
    #interrupt-cells = <1>;
    reg = <0x15c 0x4>, <0x174 0x4>;
    reg-names = "mux status", "mux mask";
    mrvl,intc-nr-irqs = <15>;
   };

   intcmux51: interrupt-controller@d4282160 {
    compatible = "mrvl,mmp2-mux-intc";
    interrupts = <51>;
    interrupt-controller;
    #interrupt-cells = <1>;
    reg = <0x160 0x4>, <0x178 0x4>;
    reg-names = "mux status", "mux mask";
    mrvl,intc-nr-irqs = <2>;
   };

   intcmux55: interrupt-controller@d4282188 {
    compatible = "mrvl,mmp2-mux-intc";
    interrupts = <55>;
    interrupt-controller;
    #interrupt-cells = <1>;
    reg = <0x188 0x4>, <0x184 0x4>;
    reg-names = "mux status", "mux mask";
    mrvl,intc-nr-irqs = <2>;
   };

   usb_phy0: usb-phy@d4207000 {
    compatible = "marvell,mmp2-usb-phy";
    reg = <0xd4207000 0x40>;
    #phy-cells = <0>;
    status = "disabled";
   };

   usb_otg0: usb-otg@d4208000 {
    compatible = "marvell,pxau2o-ehci";
    reg = <0xd4208000 0x200>;
    interrupts = <44>;
    clocks = <&soc_clocks 105>;
    clock-names = "USBCLK";
    phys = <&usb_phy0>;
    phy-names = "usb";
    status = "disabled";
   };

   mmc1: mmc@d4280000 {
    compatible = "mrvl,pxav3-mmc";
    reg = <0xd4280000 0x120>;
    clocks = <&soc_clocks 101>;
    clock-names = "io";
    interrupts = <39>;
    status = "disabled";
   };

   mmc2: mmc@d4280800 {
    compatible = "mrvl,pxav3-mmc";
    reg = <0xd4280800 0x120>;
    clocks = <&soc_clocks 102>;
    clock-names = "io";
    interrupts = <52>;
    status = "disabled";
   };

   mmc3: mmc@d4281000 {
    compatible = "mrvl,pxav3-mmc";
    reg = <0xd4281000 0x120>;
    clocks = <&soc_clocks 103>;
    clock-names = "io";
    interrupts = <53>;
    status = "disabled";
   };

   mmc4: mmc@d4281800 {
    compatible = "mrvl,pxav3-mmc";
    reg = <0xd4281800 0x120>;
    clocks = <&soc_clocks 104>;
    clock-names = "io";
    interrupts = <54>;
    status = "disabled";
   };

   camera0: camera@d420a000 {
    compatible = "marvell,mmp2-ccic";
    reg = <0xd420a000 0x800>;
    interrupts = <42>;
    clocks = <&soc_clocks 112>;
    clock-names = "axi";
    #clock-cells = <0>;
    clock-output-names = "mclk";
    status = "disabled";
   };

   camera1: camera@d420a800 {
    compatible = "marvell,mmp2-ccic";
    reg = <0xd420a800 0x800>;
    interrupts = <30>;
    clocks = <&soc_clocks 116>;
    clock-names = "axi";
    #clock-cells = <0>;
    clock-output-names = "mclk";
    status = "disabled";
   };

   adma0: dma-controller@d42a0800 {
    compatible = "marvell,adma-1.0";
    reg = <0xd42a0800 0x100>;
    interrupts = <48>;
    #dma-cells = <1>;
    asram = <&asram>;
    iram = <&asram>;
    status = "disabled";
   };

   adma1: dma-controller@d42a0900 {
    compatible = "marvell,adma-1.0";
    reg = <0xd42a0900 0x100>;
    interrupts = <48>;
    #dma-cells = <1>;
    status = "disabled";
   };

   audio_clk: clocks@d42a0c30 {
    compatible = "marvell,mmp2-audio-clock";
    reg = <0xd42a0c30 0x10>;
    clock-names = "audio", "vctcxo", "i2s0", "i2s1";
    clocks = <&soc_clocks 127>,
      <&soc_clocks 2>,
      <&soc_clocks 31>,
      <&soc_clocks 32>;
    power-domains = <&soc_clocks 1>;
    #clock-cells = <1>;
    status = "disabled";
   };

   sspa0: audio-controller@d42a0c00 {
    compatible = "marvell,mmp-sspa";
    reg = <0xd42a0c00 0x30>,
          <0xd42a0c80 0x30>;
    interrupts = <2>;
    clock-names = "audio", "bitclk";
    clocks = <&soc_clocks 127>,
      <&audio_clk 1>;
    power-domains = <&soc_clocks 1>;
    #sound-dai-cells = <0>;
    status = "disabled";
   };

   sspa1: audio-controller@d42a0d00 {
    compatible = "marvell,mmp-sspa";
    reg = <0xd42a0d00 0x30>,
          <0xd42a0d80 0x30>;
    interrupts = <3>;
    clock-names = "audio", "bitclk";
    clocks = <&soc_clocks 127>,
      <&audio_clk 2>;
    power-domains = <&soc_clocks 1>;
    #sound-dai-cells = <0>;
    status = "disabled";
   };
  };

  apb@d4000000 {
   compatible = "mrvl,apb-bus", "simple-bus";
   #address-cells = <1>;
   #size-cells = <1>;
   reg = <0xd4000000 0x00200000>;
   ranges;

   dma-controller@d4000000 {
    compatible = "marvell,pdma-1.0";
    reg = <0xd4000000 0x10000>;
    interrupts = <48>;

    #dma-channels = <16>;
    dma-channels = <16>;
    status = "disabled";
   };

   timer0: timer@d4014000 {
    compatible = "mrvl,mmp-timer";
    reg = <0xd4014000 0x100>;
    interrupts = <13>;
    clocks = <&soc_clocks 81>;
   };

   uart1: serial@d4030000 {
    compatible = "mrvl,mmp-uart", "intel,xscale-uart";
    reg = <0xd4030000 0x1000>;
    interrupts = <27>;
    clocks = <&soc_clocks 73>;
    resets = <&soc_clocks 73>;
    reg-shift = <2>;
    status = "disabled";
   };

   uart2: serial@d4017000 {
    compatible = "mrvl,mmp-uart", "intel,xscale-uart";
    reg = <0xd4017000 0x1000>;
    interrupts = <28>;
    clocks = <&soc_clocks 74>;
    resets = <&soc_clocks 74>;
    reg-shift = <2>;
    status = "disabled";
   };

   uart3: serial@d4018000 {
    compatible = "mrvl,mmp-uart", "intel,xscale-uart";
    reg = <0xd4018000 0x1000>;
    interrupts = <24>;
    clocks = <&soc_clocks 75>;
    resets = <&soc_clocks 75>;
    reg-shift = <2>;
    status = "disabled";
   };

   uart4: serial@d4016000 {
    compatible = "mrvl,mmp-uart", "intel,xscale-uart";
    reg = <0xd4016000 0x1000>;
    interrupts = <46>;
    clocks = <&soc_clocks 76>;
    resets = <&soc_clocks 76>;
    reg-shift = <2>;
    status = "disabled";
   };

   gpio: gpio@d4019000 {
    compatible = "marvell,mmp2-gpio";
    #address-cells = <1>;
    #size-cells = <1>;
    reg = <0xd4019000 0x1000>;
    gpio-controller;
    #gpio-cells = <2>;
    interrupts = <49>;
    interrupt-names = "gpio_mux";
    clocks = <&soc_clocks 66>;
    resets = <&soc_clocks 66>;
    interrupt-controller;
    #interrupt-cells = <2>;
    ranges;

    gcb0: gpio@d4019000 {
     reg = <0xd4019000 0x4>;
    };

    gcb1: gpio@d4019004 {
     reg = <0xd4019004 0x4>;
    };

    gcb2: gpio@d4019008 {
     reg = <0xd4019008 0x4>;
    };

    gcb3: gpio@d4019100 {
     reg = <0xd4019100 0x4>;
    };

    gcb4: gpio@d4019104 {
     reg = <0xd4019104 0x4>;
    };

    gcb5: gpio@d4019108 {
     reg = <0xd4019108 0x4>;
    };
   };

   twsi1: i2c@d4011000 {
    compatible = "mrvl,mmp-twsi";
    reg = <0xd4011000 0x1000>;
    interrupts = <7>;
    clocks = <&soc_clocks 60>;
    resets = <&soc_clocks 60>;
    #address-cells = <1>;
    #size-cells = <0>;
    mrvl,i2c-fast-mode;
    status = "disabled";
   };

   twsi2: i2c@d4031000 {
    compatible = "mrvl,mmp-twsi";
    reg = <0xd4031000 0x1000>;
    interrupt-parent = <&intcmux17>;
    interrupts = <0>;
    clocks = <&soc_clocks 61>;
    resets = <&soc_clocks 61>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   twsi3: i2c@d4032000 {
    compatible = "mrvl,mmp-twsi";
    reg = <0xd4032000 0x1000>;
    interrupt-parent = <&intcmux17>;
    interrupts = <1>;
    clocks = <&soc_clocks 62>;
    resets = <&soc_clocks 62>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   twsi4: i2c@d4033000 {
    compatible = "mrvl,mmp-twsi";
    reg = <0xd4033000 0x1000>;
    interrupt-parent = <&intcmux17>;
    interrupts = <2>;
    clocks = <&soc_clocks 63>;
    resets = <&soc_clocks 63>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };


   twsi5: i2c@d4033800 {
    compatible = "mrvl,mmp-twsi";
    reg = <0xd4033800 0x1000>;
    interrupt-parent = <&intcmux17>;
    interrupts = <3>;
    clocks = <&soc_clocks 64>;
    resets = <&soc_clocks 64>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   twsi6: i2c@d4034000 {
    compatible = "mrvl,mmp-twsi";
    reg = <0xd4034000 0x1000>;
    interrupt-parent = <&intcmux17>;
    interrupts = <4>;
    clocks = <&soc_clocks 65>;
    resets = <&soc_clocks 65>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   rtc: rtc@d4010000 {
    compatible = "mrvl,mmp-rtc";
    reg = <0xd4010000 0x1000>;
    interrupts = <1>, <0>;
    interrupt-names = "rtc 1Hz", "rtc alarm";
    interrupt-parent = <&intcmux5>;
    clocks = <&soc_clocks 68>;
    resets = <&soc_clocks 68>;
    status = "disabled";
   };

   ssp1: spi@d4035000 {
    compatible = "marvell,mmp2-ssp";
    reg = <0xd4035000 0x1000>;
    clocks = <&soc_clocks 77>;
    interrupts = <0>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   ssp2: spi@d4036000 {
    compatible = "marvell,mmp2-ssp";
    reg = <0xd4036000 0x1000>;
    clocks = <&soc_clocks 78>;
    interrupts = <1>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   ssp3: spi@d4037000 {
    compatible = "marvell,mmp2-ssp";
    reg = <0xd4037000 0x1000>;
    clocks = <&soc_clocks 79>;
    interrupts = <20>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   ssp4: spi@d4039000 {
    compatible = "marvell,mmp2-ssp";
    reg = <0xd4039000 0x1000>;
    clocks = <&soc_clocks 80>;
    interrupts = <21>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };
  };

  asram: sram@e0000000 {
   compatible = "mmio-sram";
   reg = <0xe0000000 0x10000>;
   ranges = <0 0xe0000000 0x10000>;
   #address-cells = <1>;
   #size-cells = <1>;
   status = "disabled";
  };

  soc_clocks: clocks {
   compatible = "marvell,mmp2-clock";
   reg = <0xd4050000 0x2000>,
         <0xd4282800 0x400>,
         <0xd4015000 0x1000>;
   reg-names = "mpmu", "apmu", "apbc";
   #clock-cells = <1>;
   #reset-cells = <1>;
   #power-domain-cells = <1>;
  };
 };
};
# 10 "arch/arm/boot/dts/mmp2-olpc-xo-1-75.dts" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/gpio/gpio.h" 1
# 11 "arch/arm/boot/dts/mmp2-olpc-xo-1-75.dts" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/input/linux-event-codes.h" 1
# 12 "arch/arm/boot/dts/mmp2-olpc-xo-1-75.dts" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/interrupt-controller/irq.h" 1
# 13 "arch/arm/boot/dts/mmp2-olpc-xo-1-75.dts" 2


/ {
 model = "OLPC XO-1.75";
 compatible = "olpc,xo-1.75", "mrvl,mmp2";

 chosen {
  #address-cells = <1>;
  #size-cells = <1>;
  ranges;

  framebuffer@1fc00000 {
   compatible = "simple-framebuffer";
   reg = <0x1fc00000 (1200 * 900 * 2)>;
   width = <1200>;
   height = <900>;
   stride = <(1200 * 2)>;
   format = "r5g6b5";
   clocks = <&soc_clocks 120>,
     <&soc_clocks 106>;
  };
 };

 memory@0 {
  available = <0xcf000 0x1ef31000 0x1000 0xbf000>;
  reg = <0x0 0x20000000>;
  device_type = "memory";
 };

 gpio-keys {
  compatible = "gpio-keys";

  lid {
   label = "Lid";
   gpios = <&gpio 129 1>;
   linux,input-type = <0x05>;
   linux,code = <0x00>;
   wakeup-source;
  };

  tablet_mode {
   label = "E-Book Mode";
   gpios = <&gpio 128 1>;
   linux,input-type = <0x05>;
   linux,code = <0x01>;
   wakeup-source;
  };
 };

 i2c {
  compatible = "i2c-gpio";
  sda-gpios = <&gpio 109 (0 | (2 | 4))>;
  scl-gpios = <&gpio 108 (0 | (2 | 4))>;
  #address-cells = <1>;
  #size-cells = <0>;
  i2c-gpio,timeout-ms = <1000>;
  status = "okay";

  camera@21 {
   compatible = "ovti,ov7670";
   reg = <0x21>;
   reset-gpios = <&gpio 102 1>;
   powerdown-gpios = <&gpio 150 1>;
   clocks = <&camera0>;
   clock-names = "xclk";

   port {
    ov7670_0: endpoint {
     hsync-active = <1>;
     vsync-active = <1>;
     remote-endpoint = <&camera0_0>;
    };
   };
  };
 };

 battery {
  compatible = "olpc,xo1.5-battery", "olpc,xo1-battery";
 };

 wlan_reg: fixedregulator0 {
  compatible = "regulator-fixed";
  regulator-name = "wlan";
  regulator-min-microvolt = <3300000>;
  regulator-max-microvolt = <3300000>;
  gpio = <&gpio 34 0>;
  enable-active-high;
 };

 wlan_pwrseq: pwrseq0 {
  compatible = "mmc-pwrseq-sd8787";
  powerdown-gpios = <&gpio 57 0>;
  reset-gpios = <&gpio 58 0>;
 };

 sound-card {
  compatible = "audio-graph-card";
  label = "OLPC XO";
  dais = <&sspa0_dai>;
  routing = "Headphones", "HPOL",
     "Headphones", "HPOR",
     "MIC2", "Mic Jack";
  widgets = "Headphone", "Headphones", "Microphone", "Mic Jack";
  hp-det-gpio = <&gpio 97 0>;
  mic-det-gpio = <&gpio 96 0>;
 };

 soc {
  axi@d4200000 {
   ap-sp@d4290000 {
    #address-cells = <1>;
    #size-cells = <0>;
    compatible = "olpc,ap-sp";
    interrupts = <40>;
    reg = <0xd4290000 0x1000>;
    data-gpios = <&gpio 72 0>;
    clk-gpios = <&gpio 71 0>;
    status = "okay";
   };
  };
 };
};

&uart3 {
 status = "okay";
};

&uart4 {
 status = "okay";
};

&rtc {
 status = "okay";
};

&usb_phy0 {
 status = "okay";
};

&usb_otg0 {
 status = "okay";
};

&mmc1 {
 clock-frequency = <50000000>;
 no-1-8-v;
 mrvl,clk-delay-cycles = <31>;
 broken-cd;
 status = "okay";
};

&mmc2 {
 clock-frequency = <50000000>;
 no-1-8-v;
 bus-width = <4>;
 non-removable;
 broken-cd;
 wakeup-source;
 keep-power-in-suspend;
 mmc-pwrseq = <&wlan_pwrseq>;
 vmmc-supply = <&wlan_reg>;
 status = "okay";
};

&mmc3 {
 clock-frequency = <50000000>;
 no-1-8-v;
 bus-width = <8>;
 non-removable;
 broken-cd;
 mrvl,clk-delay-cycles = <31>;
 status = "okay";
};

&twsi1 {
 status = "okay";

 audio-codec@1a {
  compatible = "realtek,alc5631";
  reg = <0x1a>;
  status = "okay";

  port {
   rt5631_0: endpoint {
    mclk-fs = <256>;
    clocks = <&audio_clk 0>;
    remote-endpoint = <&sspa0_0>;
   };
  };
 };
};

&twsi2 {
 status = "okay";

 rtc@68 {
  compatible = "dallas,ds1338";
  reg = <0x68>;
  status = "okay";
 };
};

&twsi6 {
 status = "okay";

 accelerometer@1d {
  compatible = "st,lis331dlh", "st,lis3lv02d";
  reg = <0x1d>;
  status = "okay";
 };
};

&ssp3 {
 #address-cells = <0>;
 spi-slave;
 status = "okay";
 ready-gpios = <&gpio 125 0>;

 slave {
  compatible = "olpc,xo1.75-ec";
  spi-cpha;
  cmd-gpios = <&gpio 155 0>;
 };
};

&camera0 {
 status = "okay";

 port {
  camera0_0: endpoint {
   remote-endpoint = <&ov7670_0>;
  };
 };
};

&asram {
 status = "okay";
};

&adma0 {
 status = "okay";
};

&audio_clk {
 status = "okay";
};

&sspa0 {
 status = "okay";
 dmas = <&adma0 0>, <&adma0 1>;
 dma-names = "tx", "rx";

 sspa0_dai: port {
  sspa0_0: endpoint {
   remote-endpoint = <&rt5631_0>;
   frame-master;
   bitclock-master;
   dai-format = "i2s";
  };
 };
};

&gpu {
 status = "okay";
};
